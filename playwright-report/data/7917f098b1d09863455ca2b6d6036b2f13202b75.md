# Test info

- Name: Auth E2E (errores) >> debe mostrar error en login inválido [en]
- Location: C:\Users\OLIVER\OLIVER\sw1\sw_exa\frontend\tests\e2e\auth-errors.spec.ts:13:9

# Error details

```
Error: locator.fill: Error: strict mode violation: getByLabel(/password|contraseña/i) resolved to 2 elements:
    1) <input id=":r1:" name="password" type="password" placeholder="password" class="css-8tk2dk-input-input" autocomplete="current-password" data-testid="data-testid Password input field"/> aka getByTestId('data-testid Password input field')
    2) <button tabindex="0" role="switch" type="button" class="css-a2noi1" aria-controls=":r1:" aria-checked="false" aria-label="Show password">…</button> aka getByRole('switch', { name: 'Show password' })

Call log:
  - waiting for getByLabel(/password|contraseña/i)

    at C:\Users\OLIVER\OLIVER\sw1\sw_exa\frontend\tests\e2e\auth-errors.spec.ts:17:55
```

# Page snapshot

```yaml
- main:
  - img "Grafana"
  - heading "Welcome to Grafana" [level=1]
  - text: Email or username
  - textbox "Email or username": noexiste@example.com
  - text: Password
  - textbox "Password"
  - switch "Show password"
  - button "Log in"
  - link "Forgot your password?":
    - /url: /user/password/send-reset-email
  - list:
    - listitem:
      - link "Documentation":
        - /url: https://grafana.com/docs/grafana/latest/?utm_source=grafana_footer
      - text: "|"
    - listitem:
      - link "Support":
        - /url: https://grafana.com/products/enterprise/?utm_source=grafana_footer
      - text: "|"
    - listitem:
      - link "Community":
        - /url: https://community.grafana.com/?utm_source=grafana_footer
      - text: "|"
    - listitem:
      - link "Enterprise (Free & unlicensed)":
        - /url: https://grafana.com/products/enterprise/?utm_source=grafana_footer
      - text: "|"
    - listitem:
      - link "Grafana v11.3.0 (d9455ff7db)":
        - /url: https://github.com/grafana/grafana/blob/main/CHANGELOG.md
```

# Test source

```ts
   1 | import { test, expect } from '@playwright/test';
   2 | import { loginOnly, screenshotOnFailure } from './utils/e2e-auth';
   3 |
   4 | const locales = ['en', 'es'];
   5 |
   6 | const invalidUser = {
   7 |   email: 'noexiste@example.com',
   8 |   password: 'wrongpass',
   9 | };
  10 |
  11 | test.describe('Auth E2E (errores)', () => {
  12 |   for (const locale of locales) {
  13 |     test(`debe mostrar error en login inválido [${locale}]`, async ({ page }, testInfo) => {
  14 |       try {
  15 |         await page.goto(`/${locale}/login`);
  16 |         await page.getByLabel(/email|correo/i).fill(invalidUser.email);
> 17 |         await page.getByLabel(/password|contraseña/i).fill(invalidUser.password);
     |                                                       ^ Error: locator.fill: Error: strict mode violation: getByLabel(/password|contraseña/i) resolved to 2 elements:
  18 |         await page.getByRole('button', { name: /login|iniciar/i }).click();
  19 |         // Debe mostrar mensaje de error
  20 |         await expect(page.getByText(/invalid|incorrecto|credenciales/i)).toBeVisible();
  21 |       } catch (err) {
  22 |         await screenshotOnFailure(page, testInfo.title);
  23 |         throw err;
  24 |       }
  25 |     });
  26 |   }
  27 | });
  28 |
```