# Test info

- Name: Projects E2E >> should list projects and allow navigation [es]
- Location: C:\Users\OLIVER\OLIVER\sw1\sw_exa\frontend\tests\e2e\projects.spec.ts:16:9

# Error details

```
Error: locator.fill: Error: strict mode violation: getByLabel(/password|contraseña/i) resolved to 2 elements:
    1) <input id=":r1:" name="password" type="password" placeholder="password" class="css-8tk2dk-input-input" autocomplete="current-password" data-testid="data-testid Password input field"/> aka getByTestId('data-testid Password input field')
    2) <button tabindex="0" role="switch" type="button" class="css-a2noi1" aria-controls=":r1:" aria-checked="false" aria-label="Show password">…</button> aka getByRole('switch', { name: 'Show password' })

Call log:
  - waiting for getByLabel(/password|contraseña/i)

    at registerAndLogin (C:\Users\OLIVER\OLIVER\sw1\sw_exa\frontend\tests\e2e\utils\e2e-auth.ts:7:49)
    at C:\Users\OLIVER\OLIVER\sw1\sw_exa\frontend\tests\e2e\projects.spec.ts:14:7
```

# Page snapshot

```yaml
- main:
  - img "Grafana"
  - heading "Welcome to Grafana" [level=1]
  - text: Email or username
  - textbox "Email or username": test-e2e@example.com
  - text: Password
  - textbox "Password"
  - switch "Show password"
  - button "Log in"
  - link "Forgot your password?":
    - /url: /user/password/send-reset-email
  - list:
    - listitem:
      - link "Documentation":
        - /url: https://grafana.com/docs/grafana/latest/?utm_source=grafana_footer
      - text: "|"
    - listitem:
      - link "Support":
        - /url: https://grafana.com/products/enterprise/?utm_source=grafana_footer
      - text: "|"
    - listitem:
      - link "Community":
        - /url: https://community.grafana.com/?utm_source=grafana_footer
      - text: "|"
    - listitem:
      - link "Enterprise (Free & unlicensed)":
        - /url: https://grafana.com/products/enterprise/?utm_source=grafana_footer
      - text: "|"
    - listitem:
      - link "Grafana v11.3.0 (d9455ff7db)":
        - /url: https://github.com/grafana/grafana/blob/main/CHANGELOG.md
```

# Test source

```ts
   1 | import { Page } from '@playwright/test';
   2 |
   3 | export async function registerAndLogin(page: Page, locale: string, email: string, password: string, name: string) {
   4 |   // Intenta registrar
   5 |   await page.goto(`/${locale}/register`);
   6 |   await page.getByLabel(/email|correo/i).fill(email);
>  7 |   await page.getByLabel(/password|contraseña/i).fill(password);
     |                                                 ^ Error: locator.fill: Error: strict mode violation: getByLabel(/password|contraseña/i) resolved to 2 elements:
   8 |   await page.getByLabel(/name|nombre/i).fill(name);
   9 |   await page.getByRole('button', { name: /register|registrarse|crear cuenta/i }).click();
  10 |
  11 |   // Si registro falla por email duplicado, ignora y sigue
  12 |   try {
  13 |     await page.waitForURL(new RegExp(`/${locale}/(login|dashboard)`), { timeout: 3000 });
  14 |   } catch {
  15 |     // Si no redirige, probablemente ya existe el usuario
  16 |   }
  17 |
  18 |   // Haz login siempre
  19 |   await page.goto(`/${locale}/login`);
  20 |   await page.getByLabel(/email|correo/i).fill(email);
  21 |   await page.getByLabel(/password|contraseña/i).fill(password);
  22 |   await page.getByRole('button', { name: /login|iniciar sesión/i }).click();
  23 |   await page.waitForURL(new RegExp(`/${locale}/dashboard`));
  24 | }
  25 |
  26 | // Login rápido usando usuario de pruebas ya existente
  27 | export async function loginOnly(page: Page, locale: string) {
  28 |   await page.goto(`/${locale}/login`);
  29 |   await page.getByLabel(/email|correo/i).fill('user@example.com');
  30 |   await page.getByLabel(/password|contraseña/i).fill('string');
  31 |   await page.getByRole('button', { name: /login|iniciar sesión/i }).click();
  32 |   await page.waitForURL(new RegExp(`/${locale}/dashboard`));
  33 | }
  34 |
  35 | // Helper para tomar screenshot y loggear el HTML en caso de fallo
  36 | export async function screenshotOnFailure(page: Page, testName: string) {
  37 |   const path = `test-failures/${testName.replace(/\s+/g, '_').toLowerCase()}.png`;
  38 |   await page.screenshot({ path, fullPage: true });
  39 |   const html = await page.content();
  40 |   // eslint-disable-next-line no-console
  41 |   console.log(`\n[SCREENSHOT] Guardado en: ${path}`);
  42 |   // eslint-disable-next-line no-console
  43 |   console.log(`\n[HTML] Estado de la página al fallar:\n${html}`);
  44 | }
  45 |
```